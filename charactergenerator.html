<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark" />
    <title>Character Generator</title>
    <link rel="stylesheet" href="dist/bundle.css">
    <style>
        /* Overlay to block interactions with the rest of the page */
        .modal-overlay {
            display: none;
            /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            /* Dark transparent background */
            z-index: 5;
            /* Make sure it overlays everything */
            justify-content: center;
            align-items: center;
            word-break: break-all;
        }

        .hidden {
            display: none;
        }

        .visible {
            display: block;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="scripts/generate-character.js"></script> <!-- Only the generate-character.js file now -->

</head>

<body>
    <script src="components/header.js"></script>
    <main class="responsive center-align">
        <article>
            <h5 class="shrinkable-text small">Clean Character Generator</h5>
            <div id="heading" class="small-space">Generate a character for your next campaign.</div>

            <!-- image -->

            <h6 id="characterTemplate"></h6>

            <nav class="vertical">
                <button id="response" class="deep-purple white-text responsive">Generate Something!!!</button>
                <button class="orange10 white-text responsive" onclick="readSheet()" id="save-button">Save
                    Character!!!</button>
            </nav>
            <details>
                <summary>Credits</summary>
                <div>This site is made by Benjamin Jonahs using the
                    <a class="deep-purple-text" href="https://www.beercss.com/">Beers CSS</a> library and inspired
                    by
                    <a class="red-text" onclick="return openModal('https://whothefuckismydndcharacter.com/')"><del>Ryan
                            J.
                            Grant's</del></a>
                    site built on the
                    <a class="red-text"
                        onclick="return openModal('https://github.com/soulwire/WTFEngine')"><del>WTFEngine</del></a>
                </div>
            </details>
        </article>
    </main>

    <div id="modal-overlay" class="modal-overlay">
        <article>
            <div id="modal-content">
                <h6 id="banned-site"></h6>
                <p class="white-text" style="word-break: keep-all;">contains explicit language. Are you sure you want to
                    proceed?</p>
                <nav class="vertical">
                    <button id="response" class="deep-purple white-text responsive" onclick="proceed()">Proceed</button>
                    <button class="orange10 white-text responsive" id="save-button"
                        onclick="closeModal()">Cancel</button>
                </nav>
            </div>
        </article>
    </div>

    <script src="dist/bundle.js"></script>
    <script src="scripts/main.js"></script>
    <script>
        let linkToOpen = ""; // Store the URL here

        // Function to open the modal and pass the link
        function openModal(link) {
            console.log(link);
            linkToOpen = link; // Store the passed link
            document.getElementById('modal-overlay').style.display = 'flex'; // Show the modal
            document.getElementById('banned-site').innerHTML = link; // Display the link in the modal
        }

        // Function to proceed and open the passed link in a new window
        function proceed() {
            window.open(linkToOpen, '_self'); // Open the stored URL
            closeModal(); // Close the modal
        }

        // Function to close the modal
        function closeModal() {
            document.getElementById('modal-overlay').style.display = 'none'; // Hide the modal
        }

    </script>
    <script>
        function navigateTo(url) {
            window.location.href = url;
        }

        document.querySelector('.icon').addEventListener('click', function () {
            const menu = document.querySelector('menu');

            if (menu.classList.contains('visible')) {
                menu.classList.remove('visible');
                menu.classList.add('hidden');
            } else {
                menu.classList.remove('hidden');
                menu.classList.add('visible');
            }
        });
    </script>

</body>

</html>